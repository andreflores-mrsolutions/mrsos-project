User: apolo
Password: andre12#$

IP: 192.168.1.69

Ejecutar la siguiente línea en la terminal:
	kubectl --namespace kasten-io port-foward service/Gateway 8080:80

Abrir el navegador en la siguiente página, 127.0.0.1:8080/k10/#/dashboard, permitirá ver el dashboard de Veeam Kasten




Instalación desde 0 de manera local:

	Notas
	Las actividades de esta lista iran numeradas cada una de ellas, si diferencian por los números de los pasos a seguir, también, encontraremos ||||||| que representan el espacio dentro de un archivo, es necesario saber que este simbolo no se debe ingresar 


Antes de empezar es necesario ejecutar estos comandos para instalar ciertas dependencias para poder hacer la instalación local
sudo apt install curl
sudo apt install jq
sudo apt update && sudo apt upgrade -y




1.- Desde terminal de Ubuntu 22.04 ejecutar los comandos siguientes:
	sudo nano /etc/hosts

1.1.-Aquí se deberá, de mostrar el contenido de este archivo, se verá muy similar a esto:
||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

127.0.0.1       localhost
127.0.1.1       apolo-prometeo

192.168.1.69    apolo-prometeo  apolo-prometeo.apolo.local
#Esta línea se añade para agregar el servidor, es necesario meter la Ip de nuestro ordenador, como se ve el nombre del equipo y posterior una combinación entre el nombre del equipo.nombre del usuario.local

# The following lines are desirable for IPv6 capable hosts
::1     ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters

||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

2.- Seguiremos con la instalación de doker
sudo curl -sSL get.docker.com | sh


3.- Aplicaremos esta línea para identificar el usuario que usamos como tipo modificador o root o similar
sudo usermod -aG docker apolo

4.- Crearemos este archivo json para crear los requisitos necesarios para el sistema
sudo nano /etc/docker/daemon.json
|||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
{
        "exec-opts": ["native.cgroupdriver-systemd"],
        "log-driver": "json-file",
        "log-opts": {
                "max-size": "100m"
        },
        "storage-driver": "overlay2"
}

|||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||


5.- Ahora descomentamos de este archivo esta línea para poder ver la ipv4 y usar el direccionamiento/seguimiento de paquetes "#net.ipv4.ip_forward=1"
sudo nano /etc/sysctl.conf
|||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
# /etc/sysctl.conf - Configuration file for setting system variables
# See /etc/sysctl.d/ for additional system variables.
# See sysctl.conf (5) for information.
#

#kernel.domainname = example.com

# Uncomment the following to stop low-level messages on console
#kernel.printk = 3 4 1 3

##############################################################3
# Functions previously found in netbase
#

# Uncomment the next two lines to enable Spoof protection (reverse-path filter)
# Turn on Source Address Verification in all interfaces to
# prevent some spoofing attacks
#net.ipv4.conf.default.rp_filter=1
#net.ipv4.conf.all.rp_filter=1

# Uncomment the next line to enable TCP/IP SYN cookies
# See http://lwn.net/Articles/277146/
# Note: This may impact IPv6 TCP sessions too
#net.ipv4.tcp_syncookies=1

# Uncomment the next line to enable packet forwarding for IPv4
net.ipv4.ip_forward=1

# Uncomment the next line to enable packet forwarding for IPv6
#  Enabling this option disables Stateless Address Autoconfiguration
#  based on Router Advertisements for this host
#net.ipv6.conf.all.forwarding=1


###################################################################
# Additional settings - these settings can improve the network
# security of the host and prevent against some network attacks
# including spoofing attacks and man in the middle attacks through
# redirection. Some network environments, however, require that these
# settings are disabled so review and enable them as needed.
#
# Do not accept ICMP redirects (prevent MITM attacks)
#net.ipv4.conf.all.accept_redirects = 0
#net.ipv6.conf.all.accept_redirects = 0
# _or_
# Accept ICMP redirects only for gateways listed in our default
# gateway list (enabled by default)
# net.ipv4.conf.all.secure_redirects = 1
#
||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||


6.- Reiniciamos la máquina para aplicar los cambios 
sudo reboot


7.- Veremos con este el estatus de docker
sudo systemctl status docker


8.- Aquí dejamos que se arranque un contenedor prueba y nos dirá un estatus de docker
sudo docker run hello-world

9.- Instalaremos kind con la siguiente línea
curl -Lo ./kind https://kind.sigs.k8s.io/dl/latest/kind-linux-amd64

10.- Agregamos Kind a nuestro PATH
chmod +x ./kind

11.- Cremos la carpeta de kind 
sudo mv ./kind /usr/local/bin/

12.- Checamos que se instalará correctamente kind checando la versión
kind version


13.- creamos el yaml de configuración de cluster con el siguiente código
sudo nano cluster-config.yml
||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
# cluster-config.yml
kind: Cluster
apiVersion: kind.x-k8s.io/v1alpha4
nodes:
- role: control-plane
  extraPortMappings:
  - containerPort: 30000
    hostPort: 30000
    protocol: TCP

||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||

14.- creamos el cluster demo con la versión 1.29.0
kind create cluster --name demo --image kindest/node:v1.29.0

15.- Veremos como kind reconoce el cluster y el puerto en el que esta
sudo docker ps

16.- Vemos los clusters creados
sudo kind get clusters

17.- Instalamos kubectl como la interfaz de línea de comandos para ejecutar comandos sobre despliegues clusterizados de Kubernetes
sudo snap install kubectl --classic

18.- Obtenemos los nodos de nuestro cluster
sudo kubectl get nodes

19.- Instalamos Helm (es un administrador de paquetes para Kubernetes)
sudo snap install helm --classic

20.- Añadimos los repositorios de aquí
sudo helm repo add kasten https://charts.kasten.io/
sudo helm repo add stable https://charts.helm.sh/stable

21.- Creamos el namespace (Aquí se despliegan las aplicaciones del cliente.) para kasten
kubectl create namespace kasten-io

22.- Checamos los nodos nuevamente 
kubectl get nodes

23.- Procedemos a instalar las herramientas de kasten 
curl https://docs.kasten.io/tools/k10_primer.sh | bash

24.- Instalamos kasten en el namespace previo de kasten
sudo helm install k10 kasten/k10 --namespace kasten-io

25.- Creamos la conexión de puertos, para acceder desde nuestro navegador.
kubectl --namespace kasten-io port-forward service/gateway 8080:8000
kubectl --namespace kasten-io port-forward service/gateway 8080:80

26.- Según la respuesta anterior veremos donde esta el dashboard Kasten 




